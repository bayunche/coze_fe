# 乙供物资解析结果审批接口文档 (v1.3.2)

## 接口概述

本版本新增了乙供物资解析结果审批功能，允许管理员对乙供物资解析结果进行审批操作。审批通过后的数据可以在物资匹配时作为历史匹配的依据数据。

## 新增接口

### 1. 任务审批接口

**接口地址**: `POST /api/tasks/approve`

**接口描述**: 对指定任务进行审批操作。系统会根据任务的业务域类型，调用对应的业务逻辑进行审批处理。

**请求参数**:

| 参数名 | 类型 | 必填 | 描述 |
|--------|------|------|------|
| taskId | String | 是 | 任务ID |
| approvalResult | Integer | 是 | 审批结果 (0: 不通过, 1: 通过) |
| approvalReason | String | 否 | 审批理由 |
| approverId | String | 否 | 审批人ID |
| approverName | String | 否 | 审批人姓名 |

**响应参数**:

| 参数名 | 类型 | 描述 |
|--------|------|------|
| taskId | String | 任务ID |
| approvalSuccess | Boolean | 审批状态 |
| approvalResult | Integer | 审批结果 (0: 不通过, 1: 通过) |
| message | String | 响应消息 |
| businessDomain | String | 业务域 |

**审批前验证**:

1. 验证任务的业务域必须为y_material
2. 验证任务状态必须为待审批状态
3. 验证当前审批的taskId下是否有未审批通过的临时物资信息

**审批成功后处理**:

1. 更新任务审批状态
2. 更新相关待办事项状态
3. 记录审批历史
4. 审批通过后的数据可以在物资匹配时作为历史匹配的依据数据

## 废弃接口

以下接口从v1.3.2版本开始已被标记为废弃，请使用新的审批流程接口：

1. `POST /api/materials/partyb/admin/query-pending-approval` - 查询待管理员审核的历史匹配数据
2. `POST /api/materials/partyb/admin/approve-history` - 管理员审核历史匹配数据

## 使用示例

### 任务审批请求示例

```json
{
  "taskId": "task-123456",
  "approvalResult": 1,
  "approvalReason": "审批通过，数据符合要求",
  "approverId": "admin-001",
  "approverName": "系统管理员"
}
```

### 任务审批响应示例

```json
{
  "taskId": "task-123456",
  "approvalSuccess": true,
  "approvalResult": 1,
  "message": "审批处理成功",
  "businessDomain": "y_material"
}
```