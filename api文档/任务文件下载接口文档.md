# 任务文件下载接口文档

**基础路径**: `/api/tasks`

---

## 1. 根据任务ID下载任务文件

根据任务ID下载该任务下所有关联的文件。如果任务下只有一个文件，则直接下载该文件；如果任务下有多个文件，则将所有文件打包成ZIP压缩包进行下载。

- **URL**: `/download-files/{taskId}`
- **Method**: `GET`
- **权限**: 需要认证

### 请求参数

| 参数 | 类型 | 数据类型 | 描述 |
| --- | --- | --- | --- |
| `taskId` | `PathVariable` | `String` | 任务ID |

### 成功响应 (200 OK)

根据文件数量返回不同格式的数据：

1. **单个文件**：
   - 返回文件流，`Content-Disposition` 头被设置为 `attachment`，浏览器将提示用户下载。

2. **多个文件**：
   - 返回ZIP压缩包文件流，文件名为 `task_files_{taskId}.zip`，`Content-Disposition` 头被设置为 `attachment`，浏览器将提示用户下载。

### 异常响应

- **400 Bad Request**: 如果任务ID为空。
- **404 Not Found**: 如果任务不存在。
- **500 Internal Server Error**: 如果文件读取或打包过程中发生错误。